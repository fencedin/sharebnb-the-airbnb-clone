<% if current_user == @rental.user %>
  <h1>Rental at '<%= @rental.location %>' </h1>
  <hr>
  <%= render "layouts/errors", object: @rental %>
  <%= render 'form' %>
<% else %>

  <h1>Rental at '<%= @rental.location %>' </h1>
  <h2>owned by '<%= @user.email %>'</h2>
  <hr>
  <div class="row">
    <div class="col-md-6">
      <%= image_tag @rental.img.url(:big) %>
    </div>
    <div class="col-md-6">
      <h3>Description</h3>
      <p><%= @rental.description %></p>
      <h3>Accomodates up to</h3>
      <p><%= pluralize(@rental.guests, 'guest') %></p>
      <h3>Price per day</h3>
      <p><%= number_to_currency(@rental.price) %></p>
      <% if user_signed_in? %>
      <hr>
        <%= form_for @reservation do |f| %>
          <%= f.label :booked, "Guests" %>
          <%= f.number_field :booked, placeholder: "example: 4", class: "form-control" %>
          <%= f.hidden_field :user_id, value: current_user.id %>
          <%= f.hidden_field :rental_id, value: @rental.id %>
          <br>
          <% if !current_user.has_booked?(@rental.id) %>
            <%= f.submit "Bookit!", class: "btn btn-primary" %>
          <% end %>
        <% end %>
        <% if current_user.has_booked?(@rental.id) %>
        <%= link_to "Cancel", reservation_path, method: "delete", class: "btn btn-danger" %>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
